<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/BndBuild.md at 2025-07-13
 | Rendered using Apache Maven Fluido Skin 2.0.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>BND Workspace Layout and Pomless Builds – Tycho</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.1.min.js"></script>
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/eclipse-tycho/tycho" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-05-24<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 6.0.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Using Tycho</li>
    <li><a href="index.html">Overview</a></li>
    <li><a href="StructuredBuild.html">Structured Build Layout and Pomless Builds</a></li>
    <li class="active"><a><span class="icon-chevron-down"></span>BND Workspace and Pomless Builds</a>
     <ul class="nav nav-list">
      <li><a href="tycho-bnd-plugin/plugin-info.html">Tycho BND Plugin</a></li>
     </ul></li>
    <li><a href="PackagingTypes.html"><span class="icon-chevron-down"></span>Packaging Types</a>
     <ul class="nav nav-list">
      <li><a href="tycho-packaging-plugin/plugin-info.html">Tycho Packaging Plugin</a></li>
     </ul></li>
    <li><a href="TargetPlatform.html"><span class="icon-chevron-down"></span>Target Platform</a>
     <ul class="nav nav-list">
      <li><a href="target-platform-configuration/plugin-info.html">Target Platform Configuration Plugin</a></li>
      <li><a href="tycho-extras/target-platform-validation-plugin/plugin-info.html">Target Platform Validation Plugin</a></li>
      <li><a href="tycho-extras/tycho-version-bump-plugin/update-target-mojo.html">Update Target Platform Mojo</a></li>
     </ul></li>
    <li><a href="TestingBundles.html"><span class="icon-chevron-down"></span>Testing Bundles</a>
     <ul class="nav nav-list">
      <li><a href="tycho-surefire-plugin/plugin-info.html">Tycho Surefire Plugin</a></li>
     </ul></li>
    <li><a href="TychoCiFriendly.html">Tycho CI Friendly Versions</a></li>
    <li><a href="Category.html"><span class="icon-chevron-down"></span>Creating update sites using category.xml</a>
     <ul class="nav nav-list">
      <li><a href="tycho-p2-repository-plugin/plugin-info.html">Tycho P2 Repository Plugin</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Properties</a>
     <ul class="nav nav-list">
      <li><a href="BuildProperties.html">Build Properties</a></li>
      <li><a href="SystemProperties.html">System Properties</a></li>
      <li><a href="TychoProperties.html">Tycho Properties</a></li>
     </ul></li>
   <li class="nav-header">Other Tycho Plugins</li>
    <li><a href="tycho-baseline-plugin/plugin-info.html">Baseline Plugin</a></li>
    <li><a href="tycho-compiler-plugin/plugin-info.html">Compiler Plugin</a></li>
    <li><a href="tycho-ds-plugin/plugin-info.html">Declarative Services Plugin</a></li>
    <li><a href="tycho-extras/tycho-document-bundle-plugin/plugin-info.html">Document Bundle Plugin</a></li>
    <li><a href="tycho-eclipse-plugin/plugin-info.html">Eclipse Plugin</a></li>
    <li><a href="tycho-gpg-plugin/plugin-info.html">GPG Signature Plugin</a></li>
    <li><a href="tycho-p2-director-plugin/plugin-info.html">P2 Director Plugin</a></li>
    <li><a href="tycho-p2-plugin/plugin-info.html">P2 Metadata Plugin</a></li>
    <li><a href="tycho-p2-publisher-plugin/plugin-info.html">P2 Publisher Plugin</a></li>
    <li><a href="tycho-extras/tycho-p2-extras-plugin/plugin-info.html">P2 Extras Plugin</a></li>
    <li><a href="tycho-apitools-plugin/plugin-info.html">PDE API Tools Plugin</a></li>
    <li><a href="tycho-source-plugin/plugin-info.html">Source Plugin</a></li>
    <li><a href="tycho-versions-plugin/plugin-info.html">Versions Plugin</a></li>
    <li><a href="tycho-cleancode-plugin/plugin-info.html">CleanCode Plugin</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="BND_Workspace_Layout_and_Pomless_Builds"></a>
<h1>BND Workspace Layout and Pomless Builds</h1>
<p>Tycho supports building projects that use the <a href="https://bndtools.org/concepts.html" class="externalLink">BND Workspace Layout</a>.</p><section><a id="BND_Workspace_Layout"></a>
<h2>BND Workspace Layout</h2>
<p>A BND Workspace layout build layout usually has the following structure:</p>
<ul>

<li><code>root folder</code> - this usually is the root of your project repository
<ul>

<li><code>cnf</code> - configuration folder for general setup
<ul>

<li><code>build.bnd</code> - main configuration file</li>
<li><code>ext</code> - additional configuration (optional)</li>
</ul></li>
<li><code>bundle1</code> - A bundle project
<ul>

<li><code>bnd.bnd</code> - project configuration file</li>
</ul></li>
<li><code>bundle2</code> - Another bundle project
<ul>

<li><code>bnd.bnd</code> - project configuration file</li>
<li><code>myapp.bndrun</code> - a .bndrun file which can be used to export an executable .jar as part of the build</li>
</ul></li>
<li><code>...</code></li>
</ul></li>
</ul>
<p>Any folder that does not match the layout is ignored.</p></section><section><a id="Pomless_Builds"></a>
<h2>Pomless Builds</h2>
<p>Given the above layout, Tycho now has a good knowledge about what your build artifacts are.
In contrast to a traditional maven build where each module has to contain a <code>pom.xml</code> file Tycho can derive most all from your supplied bnd configuration files, so everything is configured there and usually no additional maven configuration is required, therefore this build is completely pomless (no <code>pom.xml</code>), there are only a few steps to consider:</p>
<ul>

<li>Add a folder called <code>.mvn</code> to the root</li>
<li>Inside the <code>.mvn</code> folder place a file called <code>extensions.xml</code> with the following content:</li>
</ul>

<pre class="prettyprint linenums"><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;extensions&gt;
   &lt;extension&gt;
      &lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;
      &lt;artifactId&gt;tycho-build&lt;/artifactId&gt;
      &lt;version&gt;${tycho-version}&lt;/version&gt;
   &lt;/extension&gt;
&lt;/extensions&gt;
</code></pre>
<ul>

<li>create a file called <code>maven.config</code> in the <code>.mvn</code> folder with the following content (adjust the Tycho version accordingly to the <a href="https://github.com/eclipse-tycho/tycho/releases" class="externalLink">latest release</a>!):</li>
</ul>

<pre class="prettyprint linenums"><code class="language-properties">-Dtycho-version=4.0.11
</code></pre>
<ul>

<li>You can now run your build with <code>mvn clean verify</code>.</li>
</ul>
<p>You can check more details in a <a href="https://github.com/eclipse-tycho/tycho/tree/master/demo/bnd-workspace" class="externalLink">demo project</a>.</p><section><a id="Configure_the_pomless_build"></a>
<h3>Configure the pomless build</h3>
<p>If you want to further configure the build can be done in these ways:</p>
<ol style="list-style-type: decimal;">

<li>You can specify additional global properties in the <code>.mvn/maven.config</code>.</li>
<li>You can define properties per project properties in the <code>bnd.bnd</code> file <code>pom.model.property.&lt;some property&gt;: true</code>, see <a href="https://github.com/eclipse-tycho/tycho/wiki/Tycho-Pomless#overwrite-group-and-artifact-ids" class="externalLink">the wiki</a> for more details.</li>
<li>You can place a <code>pom.xml</code> in your <code>cnf</code> folder this will then be used as a parent for the aggregator, here you can add additional mojos, profiles and so on. If you want to enable certain things only for some of the projects you can use properties as described in (2) to skip the execution of mojos not relevant for other projects.</li>
</ol><section><a id="Create_executable_jar"></a>
<h4>Create executable jar</h4>
<p>Tycho can also create an executable <code>.jar</code> file of your application based on a <code>.bndrun</code> file containing <code>-runbundles</code>, which you can then deploy and start.</p>
<p>Just add the following line to your <code>.mvn/maven.config</code> file or pass it on the maven commandline:</p>

<pre><code class="nohighlight nocode">-Dbndrun.exports=mydemo.app
</code></pre>
<p>This automatically searches all your bundles for a file named <code>mydemo.app.bndrun</code>.</p>
<p>If you have a bundle <code>myappbundle</code> which contains <code>mydemo.app.bndrun</code>, then the build would create an executable jar at the following location:</p>
<p><code>/myappbundle/target/executable/mydemo.app.bndrun.jar</code></p>
<p>Your build output will look like this:</p>

<pre><code class="nohighlight nocode">[INFO] --- tycho-bnd:4.0.11:run (build) @ myappbundle ---
[INFO] Exporting mydemo.app.bndrun ...
[INFO] Exported to .../myappbundle/target/executable/tycho.demo.app.jar
</code></pre></section></section></section><section><a id="Mixed_Builds"></a>
<h2>Mixed Builds</h2>
<p>You can even combine a BND Workspace and PDE bundles in a build, see <a href="https://github.com/eclipse-tycho/tycho/tree/master/demo/bnd-pde-workspace" class="externalLink">demo</a>.</p></section><section><a id="Troubleshooting"></a>
<h2>Troubleshooting</h2>
<p>Note: All properties in <code>.mvn/maven.config</code> can also be supplied via command line, for example to use a different tycho version use the following command line argument:</p>
<p><code>mvn clean install -Dtycho-version=5.0.0-SNAPSHOT</code></p>
<p>This uses the snapshot build which is useful if you build tycho yourself on your local machine and want to test that build.</p><section><a id="polyglot.dump.pom"></a>
<h3>polyglot.dump.pom</h3>
<p>E.g., <code>-Dpolyglot.dump.pom=pom-gen.xml</code> specifies that the generated pom.xml files which tycho polyglot creates is called <code>pom-gen.xml</code>.
This might be needed if you have name clashes with existing files in your build.</p></section><section><a id="tycho.pomless.aggregator.names"></a>
<h3>tycho.pomless.aggregator.names</h3>
<p>The command line argument <code>-Dtycho.pomless.aggregator.names=_dummydisabled_</code> is for handling a rare edge case:
In case you have your bnd workspace in a subfolder named <code>bundles</code>, <code>plugins</code>, <code>tests</code>,<code>features</code>, <code>sites</code>,<code>products</code>, or <code>releng</code> then tycho can have problems.
The reason is that those names are kind of &#x2018;magic&#x2019; names reserved for special usecases.
<code>-Dtycho.pomless.aggregator.names=_dummydisabled_</code> is a workaround to instruct Tycho to ignore those names. You can choose any word like <code>_dummydisabled_</code>, but just make sure you do not have a folder with that name.</p></section></section><section><a id="Links"></a>
<h2>Links</h2>
<ul>

<li><a href="https://bnd.discourse.group/t/building-bnd-workspaces-with-pomless-maven-via-eclipse-tycho/" class="externalLink">Building bnd workspaces with Tycho</a></li>
<li><a href="https://vogella.com/blog/getting-started-with-osgi-declarative-services-2024/" class="externalLink">Getting Started with OSGi Declarative Services</a></li>
</ul></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2008–2025
<a href="https://www.eclipse.org/">Eclipse Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
